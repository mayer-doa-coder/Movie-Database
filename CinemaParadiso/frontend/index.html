<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema Paradiso - Database Management</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Cinema Paradiso</h1>
            <p>Movie Database Management System</p>
            <button id="toggleTerminal" class="btn btn-terminal">Toggle SQL Terminal</button>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="movies">Movies</button>
            <button class="tab-btn" data-tab="series">TV Series</button>
            <button class="tab-btn" data-tab="celebrities">Celebrities</button>
            <button class="tab-btn" data-tab="users">Users</button>
            <button class="tab-btn" data-tab="reviews">Reviews</button>
            <button class="tab-btn" data-tab="views">Views</button>
            <button class="tab-btn" data-tab="query">SQL Executor</button>
            <button class="tab-btn" data-tab="advanced">Analytics</button>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <h2>Database Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalMovies">0</h3>
                            <p>Total Movies</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalSeries">0</h3>
                            <p>TV Series</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalCelebrities">0</h3>
                            <p>Celebrities</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-info">
                            <h3 id="totalQueries">0</h3>
                            <p>SQL Queries Executed</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity" class="activity-list"></div>
                </div>
            </div>

            <!-- Movies Tab -->
            <div class="tab-content" id="movies">
                <div class="section-header">
                    <h2>Movies Management</h2>
                    <button class="btn btn-primary" onclick="showAddMovieForm()">+ Add Movie</button>
                </div>

                <div class="filters">
                    <input type="text" id="movieSearch" placeholder="Search movies..." class="search-input">
                    <select id="genreFilter" class="filter-select">
                        <option value="">All Genres</option>
                        <option value="Action">Action</option>
                        <option value="Drama">Drama</option>
                        <option value="Sci-Fi">Sci-Fi</option>
                        <option value="Crime">Crime</option>
                    </select>
                </div>

                <div id="moviesList" class="data-grid"></div>
            </div>

            <!-- TV Series Tab -->
            <div class="tab-content" id="series">
                <div class="section-header">
                    <h2>TV Series Management</h2>
                    <button class="btn btn-primary" onclick="showAddSeriesForm()">+ Add Series</button>
                </div>

                <div class="filters">
                    <input type="text" id="seriesSearch" placeholder="Search series..." class="search-input">
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="Ongoing">Ongoing</option>
                        <option value="Ended">Ended</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                </div>

                <div id="seriesList" class="data-grid"></div>
            </div>

            <!-- Celebrities Tab -->
            <div class="tab-content" id="celebrities">
                <div class="section-header">
                    <h2>Celebrities Management</h2>
                    <button class="btn btn-primary" onclick="showAddCelebrityForm()">+ Add Celebrity</button>
                </div>

                <div class="filters">
                    <input type="text" id="celebritySearch" placeholder="Search celebrities..." class="search-input">
                    <select id="professionFilter" class="filter-select">
                        <option value="">All Professions</option>
                        <option value="Actor">Actor</option>
                        <option value="Director">Director</option>
                        <option value="Writer">Writer</option>
                        <option value="Producer">Producer</option>
                    </select>
                </div>

                <div id="celebritiesList" class="data-grid"></div>
            </div>

            <!-- Users Tab -->
            <div class="tab-content" id="users">
                <div class="section-header">
                    <h2>Users Management</h2>
                </div>

                <div class="filters">
                    <input type="text" id="userSearch" placeholder="Search users..." class="search-input">
                    <select id="countryFilter" class="filter-select">
                        <option value="">All Countries</option>
                        <option value="USA">USA</option>
                        <option value="UK">UK</option>
                        <option value="Canada">Canada</option>
                        <option value="Bangladesh">Bangladesh</option>
                    </select>
                    <button class="btn btn-secondary" onclick="loadUsers()">Search</button>
                </div>

                <div id="usersList" class="data-grid"></div>
            </div>

            <!-- Reviews Tab -->
            <div class="tab-content" id="reviews">
                <div class="section-header">
                    <h2>Reviews Management</h2>
                </div>

                <div class="filters">
                    <select id="reviewContentType" class="filter-select">
                        <option value="">All Content</option>
                        <option value="movie">Movies</option>
                        <option value="tv_series">TV Series</option>
                    </select>
                    <select id="reviewRatingFilter" class="filter-select">
                        <option value="">All Ratings</option>
                        <option value="9">9.0+</option>
                        <option value="8">8.0+</option>
                        <option value="7">7.0+</option>
                        <option value="6">6.0+</option>
                    </select>
                    <button class="btn btn-secondary" onclick="loadReviews()">Filter</button>
                </div>

                <div id="reviewsList" class="data-grid"></div>
            </div>

            <!-- SQL Executor Tab -->
            <div class="tab-content" id="query">
                <h2>SQL Query Executor</h2>
                <p class="info-text">Write and execute custom SQL queries. The results and queries will appear in real-time.</p>
                
                <div class="query-editor">
                    <textarea id="sqlQuery" placeholder="Enter your SQL query here...
Example: SELECT * FROM movies WHERE rating > 8.0 ORDER BY rating DESC"></textarea>
                    <div class="editor-actions">
                        <button class="btn btn-success" onclick="executeQuery()">▶ Execute Query</button>
                        <button class="btn btn-secondary" onclick="clearQuery()">Clear</button>
                    </div>
                </div>

                <div id="queryResult" class="query-result"></div>
            </div>

            <!-- Advanced Queries Tab -->
            <div class="tab-content" id="advanced">
                <h2>Analytics & Discovery</h2>
                <p class="info-text">Explore your content with powerful analytics and discovery tools</p>

                <!-- Search & Discovery Section -->
                <div class="analytics-section">
                    <h3>Search & Discovery</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4> Search Content</h4>
                            <input type="text" id="searchKeyword" placeholder="Search movies & series..." class="tool-input">
                            <button onclick="searchContent()" class="tool-btn">Search</button>
                        </div>

                        <div class="tool-card">
                            <h4> Find Similar</h4>
                            <input type="number" id="similarMovieId" placeholder="Movie ID" class="tool-input">
                            <button onclick="findSimilar()" class="tool-btn">Find Similar</button>
                        </div>

                        <div class="tool-card">
                            <h4>Discover Top Rated</h4>
                            <select id="minRatingDiscover" class="tool-input">
                                <option value="7.0">7.0+</option>
                                <option value="8.0" selected>8.0+</option>
                                <option value="9.0">9.0+</option>
                            </select>
                            <button onclick="discoverTopRated()" class="tool-btn">Discover</button>
                        </div>

                        <div class="tool-card">
                            <h4>Browse by Year</h4>
                            <div style="display: flex; gap: 5px;">
                                <input type="number" id="startYear" placeholder="2010" value="2010" class="tool-input" style="flex: 1;">
                                <input type="number" id="endYear" placeholder="2024" value="2024" class="tool-input" style="flex: 1;">
                            </div>
                            <button onclick="browseByYear()" class="tool-btn">Browse</button>
                        </div>
                    </div>
                </div>

                <!-- Filtering Section -->
                <div class="analytics-section">
                    <h3> Advanced Filtering</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Filter by Genre</h4>
                            <select id="filterGenre" class="tool-input">
                                <option value="">Select Genre</option>
                                <option value="Action">Action</option>
                                <option value="Drama">Drama</option>
                                <option value="Sci-Fi">Sci-Fi</option>
                                <option value="Crime">Crime</option>
                                <option value="Thriller">Thriller</option>
                            </select>
                            <select id="sortBy" class="tool-input">
                                <option value="rating">Sort by Rating</option>
                                <option value="release_date">Sort by Date</option>
                                <option value="title">Sort by Title</option>
                            </select>
                            <button onclick="filterByGenre()" class="tool-btn">Apply Filter</button>
                        </div>

                        <div class="tool-card">
                            <h4>Rating Range</h4>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <input type="number" id="minRating" value="7" min="0" max="10" step="0.1" class="tool-input" style="flex: 1;">
                                <span>to</span>
                                <input type="number" id="maxRating" value="10" min="0" max="10" step="0.1" class="tool-input" style="flex: 1;">
                            </div>
                            <button onclick="filterByRatingRange()" class="tool-btn">Filter</button>
                        </div>

                        <div class="tool-card">
                            <h4>Multiple Genres</h4>
                            <input type="text" id="multipleGenres" placeholder="Action,Drama,Sci-Fi" class="tool-input">
                            <small>Comma-separated</small>
                            <button onclick="filterMultipleGenres()" class="tool-btn">Filter</button>
                        </div>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div class="analytics-section">
                    <h3>Analytics & Statistics</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Genre Statistics</h4>
                            <p class="tool-desc">Comprehensive analysis by genre</p>
                            <button onclick="getGenreStatistics()" class="tool-btn">Analyze Genres</button>
                        </div>

                        <div class="tool-card">
                            <h4>Director Performance</h4>
                            <p class="tool-desc">Top directors and their ratings</p>
                            <button onclick="getDirectorPerformance()" class="tool-btn">View Directors</button>
                        </div>

                        <div class="tool-card">
                            <h4>Content Distribution</h4>
                            <p class="tool-desc">Movies & Series distribution</p>
                            <button onclick="getContentDistribution()" class="tool-btn">View Distribution</button>
                        </div>

                        <div class="tool-card">
                            <h4>Rating Distribution</h4>
                            <p class="tool-desc">How ratings are distributed</p>
                            <button onclick="getRatingDistribution()" class="tool-btn">View Distribution</button>
                        </div>
                    </div>
                </div>

                <!-- Comparisons Section -->
                <div class="analytics-section">
                    <h3>Comparisons</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Compare Genres</h4>
                            <select id="genre1" class="tool-input">
                                <option value="Action">Action</option>
                                <option value="Drama">Drama</option>
                                <option value="Sci-Fi">Sci-Fi</option>
                                <option value="Crime">Crime</option>
                            </select>
                            <select id="genre2" class="tool-input">
                                <option value="Drama" selected>Drama</option>
                                <option value="Action">Action</option>
                                <option value="Sci-Fi">Sci-Fi</option>
                                <option value="Crime">Crime</option>
                            </select>
                            <button onclick="compareGenres()" class="tool-btn">Compare</button>
                        </div>

                        <div class="tool-card">
                            <h4>Movies vs Series</h4>
                            <p class="tool-desc">Compare movies and TV series stats</p>
                            <button onclick="compareMoviesVsSeries()" class="tool-btn">Compare</button>
                        </div>
                    </div>
                </div>

                <!-- Recommendations Section -->
                <div class="analytics-section">
                    <h3>Smart Recommendations</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Get Recommendations</h4>
                            <input type="number" id="userIdRec" placeholder="User ID (default: 1)" value="1" class="tool-input">
                            <button onclick="getRecommendations()" class="tool-btn">Get Recommendations</button>
                        </div>

                        <div class="tool-card">
                            <h4> Trending Now</h4>
                            <p class="tool-desc">Recent highly-rated content</p>
                            <button onclick="getTrendingNow()" class="tool-btn">View Trending</button>
                        </div>

                        <div class="tool-card">
                            <h4> Hidden Gems</h4>
                            <p class="tool-desc">Great content you might have missed</p>
                            <button onclick="getHiddenGems()" class="tool-btn">Discover Gems</button>
                        </div>
                    </div>
                </div>

                <!-- Timeline Section -->
                <div class="analytics-section">
                    <h3>Timeline & Trends</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Release Timeline</h4>
                            <p class="tool-desc">Monthly release patterns</p>
                            <button onclick="getReleaseTimeline()" class="tool-btn">View Timeline</button>
                        </div>

                        <div class="tool-card">
                            <h4>Decade Analysis</h4>
                            <p class="tool-desc">Content analysis by decade</p>
                            <button onclick="getDecadeAnalysis()" class="tool-btn">Analyze Decades</button>
                        </div>
                    </div>
                </div>

                <!-- Cast & Crew Section -->
                <div class="analytics-section">
                    <h3>Cast & Crew</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>Movie with Cast</h4>
                            <input type="number" id="movieIdCast" placeholder="Movie ID" class="tool-input">
                            <button onclick="getMovieWithCast()" class="tool-btn">View Details</button>
                        </div>

                        <div class="tool-card">
                            <h4>Celebrity Filmography</h4>
                            <input type="number" id="celebrityIdFilm" placeholder="Celebrity ID" class="tool-input">
                            <button onclick="getCelebrityFilmography()" class="tool-btn">View Filmography</button>
                        </div>
                    </div>
                </div>

                <!-- Set Operations Section -->
                <div class="analytics-section">
                    <h3>Set Operations (INTERSECT & MINUS)</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>INTERSECT: High Rated by Genre</h4>
                            <p class="tool-desc">Movies in specific genre AND high rating</p>
                            <input type="text" id="set-genre" placeholder="Genre (Action)" class="tool-input" value="Action">
                            <input type="number" id="set-rating" placeholder="Min Rating (8.0)" class="tool-input" value="8.0" step="0.1">
                            <button onclick="loadSetOperations('intersect_high_rated')" class="tool-btn">Execute INTERSECT</button>
                        </div>

                        <div class="tool-card">
                            <h4>MINUS: Movies Without Reviews</h4>
                            <p class="tool-desc">All movies MINUS movies with reviews</p>
                            <button onclick="loadSetOperations('minus_movies_no_reviews')" class="tool-btn">Execute MINUS</button>
                        </div>
                    </div>
                </div>

                <!-- Results Display -->
                <div id="analyticsResult" class="query-result"></div>
            </div>

            <!-- Views Tab -->
            <div class="tab-content" id="views">
                <h2>Database Views</h2>
                <p class="section-info">Query data using predefined database views for simplified access</p>

                <!-- View Selection -->
                <div class="analytics-section">
                    <h3>Available Views</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>List All Views</h4>
                            <p class="tool-desc">Show all available database views</p>
                            <button onclick="loadViews('list')" class="tool-btn">List Views</button>
                        </div>

                        <div class="tool-card">
                            <h4>Movies with Directors</h4>
                            <p class="tool-desc">Movies with director information</p>
                            <input type="number" id="view-limit" placeholder="Limit (20)" class="tool-input" value="20">
                            <button onclick="loadViews('movies_with_directors')" class="tool-btn">View Data</button>
                        </div>

                        <div class="tool-card">
                            <h4>Series with Creators</h4>
                            <p class="tool-desc">TV Series with creator information</p>
                            <button onclick="loadViews('series_with_creators')" class="tool-btn">View Data</button>
                        </div>

                        <div class="tool-card">
                            <h4>Top Rated Content</h4>
                            <p class="tool-desc">All content with rating >= 8.0</p>
                            <button onclick="loadViews('top_rated_content')" class="tool-btn">View Data</button>
                        </div>

                        <div class="tool-card">
                            <h4>User Statistics</h4>
                            <p class="tool-desc">User activity summary</p>
                            <input type="number" id="view-user-id" placeholder="User ID (optional)" class="tool-input">
                            <button onclick="loadViews('user_statistics')" class="tool-btn">View Stats</button>
                        </div>

                        <div class="tool-card">
                            <h4>Celebrity Filmography</h4>
                            <p class="tool-desc">Celebrity work summary</p>
                            <input type="number" id="view-celeb-id" placeholder="Celebrity ID (optional)" class="tool-input">
                            <button onclick="loadViews('celebrity_filmography')" class="tool-btn">View Data</button>
                        </div>

                        <div class="tool-card">
                            <h4>Recent Reviews</h4>
                            <p class="tool-desc">Latest reviews with details</p>
                            <button onclick="loadViews('recent_reviews')" class="tool-btn">View Reviews</button>
                        </div>
                    </div>
                </div>

                <!-- Results Display -->
                <div id="results" class="query-result"></div>
            </div>
        </main>
    </div>

    <!-- Floating SQL Terminal -->
    <div id="sqlTerminal" class="sql-terminal">
        <div class="terminal-header">
            <span>Live SQL Terminal</span>
            <div class="terminal-controls">
                <button onclick="clearTerminal()" title="Clear">-</button>
                <button onclick="toggleTerminal()" title="Close">✕</button>
            </div>
        </div>
        <div class="terminal-stats">
            <span id="terminalStats">Queries: 0 | Success: 0 | Errors: 0</span>
        </div>
        <div id="terminalContent" class="terminal-content"></div>
    </div>

    <!-- Modal for Forms -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
